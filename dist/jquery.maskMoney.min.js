/*
 *  <%= pkg.title || pkg.name %> - v<%= pkg.version %>
 *  <%= pkg.description %>
 *  <%= pkg.homepage %>
 *
 *  Made by <%= pkg.author.name %>
 *  Under <%= pkg.licenses[0].type %> License (<%= pkg.licenses[0].url %>)
 */
!function($){"use strict";$.browser||($.browser={},$.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var a={destroy:function(){return $(this).unbind(".maskMoney"),$.browser.msie&&(this.onpaste=null),this},mask:function(a){return this.each(function(){var b=$(this);return"number"==typeof a&&b.val(a),b.trigger("mask")})},unmasked:function(){return this.map(function(){var a,b=$(this).val()||"0",c=b.indexOf("-")!==-1;return $(b.split(/\D/).reverse()).each(function(b,c){if(c)return a=c,!1}),b=b.replace(/\D/g,""),b=b.replace(new RegExp(a+"$"),"."+a),c&&(b="-"+b),parseFloat(b)})},init:function(a){return a=$.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},a),this.each(function(){function b(){var a,b,c,d,e,f=u.get(0),g=0,h=0;return"number"==typeof f.selectionStart&&"number"==typeof f.selectionEnd?(g=f.selectionStart,h=f.selectionEnd):(b=document.selection.createRange(),b&&b.parentElement()===f&&(d=f.value.length,a=f.value.replace(/\r\n/g,"\n"),c=f.createTextRange(),c.moveToBookmark(b.getBookmark()),e=f.createTextRange(),e.collapse(!1),c.compareEndPoints("StartToEnd",e)>-1?g=h=d:(g=-c.moveStart("character",-d),g+=a.slice(0,g).split("\n").length-1,c.compareEndPoints("EndToEnd",e)>-1?h=d:(h=-c.moveEnd("character",-d),h+=a.slice(0,h).split("\n").length-1)))),{start:g,end:h}}function c(){var a=!(u.val().length>=u.attr("maxlength")&&u.attr("maxlength")>=0),c=b(),d=c.start,e=c.end,f=!(c.start===c.end||!u.val().substring(d,e).match(/\d/)),g="0"===u.val().substring(0,1);return a||f||g}function d(a){u.each(function(b,c){if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}})}function e(a){var b="";return a.indexOf("-")>-1&&(a=a.replace("-",""),b="-"),b+s.prefix+a+s.suffix}function f(a){var b,c,d,f=a.indexOf("-")>-1&&s.allowNegative?"-":"",g=a.replace(/[^0-9]/g,""),h=g.slice(0,g.length-s.precision);return h=h.replace(/^0*/g,""),h=h.replace(/\B(?=(\d{3})+(?!\d))/g,s.thousands),""===h&&(h="0"),b=f+h,s.precision>0&&(c=g.slice(g.length-s.precision),d=new Array(s.precision+1-c.length).join(0),b+=s.decimal+d+c),e(b)}function g(a){var b,c=u.val().length;u.val(f(u.val())),b=u.val().length,a-=c-b,d(a)}function h(){var a=u.val();s.precision>0&&a.indexOf(s.decimal)<0&&(a+=s.decimal+new Array(s.precision+1).join(0)),u.val(f(a))}function i(){var a=u.val();return s.allowNegative?""!==a&&"-"===a.charAt(0)?a.replace("-",""):"-"+a:a}function j(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function k(a){a=a||window.event;var d,e,f,h,k,l=a.which||a.charCode||a.keyCode;return void 0!==l&&(l<48||l>57?45===l?(u.val(i()),!1):43===l?(u.val(u.val().replace("-","")),!1):13===l||9===l||(!(!$.browser.mozilla||37!==l&&39!==l||0!==a.charCode)||(j(a),!0)):!!c()&&(j(a),d=String.fromCharCode(l),e=b(),f=e.start,h=e.end,k=u.val(),u.val(k.substring(0,f)+d+k.substring(h,k.length)),g(f+1),!1))}function l(a){a=a||window.event;var c,d,e,f,h,i=a.which||a.charCode||a.keyCode;return void 0!==i&&(c=b(),d=c.start,e=c.end,8!==i&&46!==i&&63272!==i||(j(a),f=u.val(),d===e&&(8===i?""===s.suffix?d-=1:(h=f.split("").reverse().join("").search(/\d/),d=f.length-h-1,e=d+1):e+=1),u.val(f.substring(0,d)+f.substring(e,f.length)),g(d),!1))}function m(){t=u.val(),h();var a,b=u.get(0);b.createTextRange&&(a=b.createTextRange(),a.collapse(!1),a.select())}function n(){setTimeout(function(){h()},0)}function o(){var a=parseFloat("0")/Math.pow(10,s.precision);return a.toFixed(s.precision).replace(new RegExp("\\.","g"),s.decimal)}function p(a){if($.browser.msie&&k(a),""===u.val()||u.val()===e(o()))s.allowZero?s.affixesStay?u.val(e(o())):u.val(o()):u.val("");else if(!s.affixesStay){var b=u.val().replace(s.prefix,"").replace(s.suffix,"");u.val(b)}u.val()!==t&&u.change()}function q(){var a,b=u.get(0);b.setSelectionRange?(a=u.val().length,b.setSelectionRange(a,a)):u.val(u.val())}function r(a){a=a||window.event,a.which=u.val().charCodeAt(u.val().length-1);var d,e,f,h=a.which||a.charCode||a.keyCode;return u.val(u.val().replace(/[^0-9.]/g,"")),void 0!==h&&(h<48||h>57?45===h?(u.val(i()),!1):43===h?(u.val(u.val().replace("-","")),!1):13===h||9===h||(!(!$.browser.mozilla||37!==h&&39!==h||0!==a.charCode)||(j(a),!0)):!!c()&&(j(a),d=String.fromCharCode(h),e=b(),f=e.start,g(f+1),!1))}var s,t,u=$(this);s=$.extend({},a),s=$.extend(s,u.data()),u.unbind(".maskMoney"),"undefined"!=typeof u.get(0).oninput?u.bind("input.maskMoney",r):u.bind("keypress.maskMoney",k),u.bind("keydown.maskMoney",l),u.bind("blur.maskMoney",p),u.bind("focus.maskMoney",m),u.bind("click.maskMoney",q),u.bind("cut.maskMoney",n),u.bind("paste.maskMoney",n),u.bind("mask.maskMoney",h)})}};$.fn.maskMoney=function(b){return a[b]?a[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void $.error("Method "+b+" does not exist on jQuery.maskMoney"):a.init.apply(this,arguments)}}(window.jQuery||window.Zepto);